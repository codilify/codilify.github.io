function Play(){for(var e=document.getElementsByClassName("letter"),r=0;r<e.length;r++)e[r].innerHTML="<input class='char' type='text' maxlength='1'></input>";mode=0,ToggleInputBoxes(!1)}function Create(){if(0===mode)ToggleInputBoxes(!0),document.getElementById("crossword").innerHTML=BoardToHtml(" "),mode=1;else{GetWordsFromInput();for(var e=0,r=!1;e<10&&!r;e++)CleanVars(),r=PopulateBoard();document.getElementById("crossword").innerHTML=r?BoardToHtml(" "):"Failed to find crossword."}}function ToggleInputBoxes(e){for(var r=document.getElementsByClassName("word"),t=document.getElementsByClassName("clue"),a=0;a<r.length;a++)!0===e?(RemoveClass(r[a],"hide"),RemoveClass(t[a],"clueReadOnly"),t[a].disabled=""):(AddClass(r[a],"hide"),AddClass(t[a],"clueReadOnly"),t[a].disabled="readonly")}function GetWordsFromInput(){wordArr=["TRUST","RESPECT","ETHICS","INNOVATION","COMMITMENT"];for(var e,r=0,t=document.getElementsByClassName("word");r<t.length;r++)e=t[r].value.toUpperCase(),null!==e&&e.length>1&&wordArr.push(e)}function CleanVars(){Bounds.Clean(),wordBank=[],wordsActive=[],board=[];for(var e=0;e<32;e++){board.push([]);for(var r=0;r<32;r++)board[e].push(null)}}function PopulateBoard(){PrepareBoard();for(var e=0,r=!0,t=wordBank.length;e<t&&r;e++)r=AddWordToBoard();return r}function PrepareBoard(){wordBank=[];for(var e=0,r=wordArr.length;e<r;e++)wordBank.push(new WordObj(wordArr[e]));for(e=0;e<wordBank.length;e++)for(var t=0,a=wordBank[e];t<a.char.length;t++)for(var o=0,n=a.char[t];o<wordBank.length;o++)for(var s=0,l=wordBank[o];o!==e&&s<l.char.length;s++)a.totalMatches+=n===l.char[s]?1:0}function AddWordToBoard(){var e,r,t,a,o,n,s,l,d=9999;if(wordsActive.length<1){for(t=0,e=0,r=wordBank.length;e<r;e++)wordBank[e].totalMatches<wordBank[t].totalMatches&&(t=e);wordBank[t].successfulMatches=[{x:12,y:12,dir:0}]}else for(t=-1,e=0,r=wordBank.length;e<r;e++){a=wordBank[e],a.effectiveMatches=0,a.successfulMatches=[];for(var c=0,i=a.char.length;c<i;c++){o=a.char[c];for(var h=0,u=wordsActive.length;h<u;h++){n=wordsActive[h];for(var f=0,v=n.char.length;f<v;f++)if(s=n.char[f],o===s){a.effectiveMatches++;var g={x:n.x,y:n.y,dir:0};0===n.dir?(g.dir=1,g.x+=f,g.y-=c):(g.dir=0,g.y+=f,g.x-=c);for(var m=!0,B=-1,w=a.char.length+1;B<w;B++){var p=[];if(B!==c){if(0===g.dir){var b=g.x+B;if(b<0||b>board.length){m=!1;break}p.push(board[b][g.y]),p.push(board[b][g.y+1]),p.push(board[b][g.y-1])}else{var y=g.y+B;if(y<0||y>board[g.x].length){m=!1;break}p.push(board[g.x][y]),p.push(board[g.x+1][y]),p.push(board[g.x-1][y])}if(B>-1&&B<w-1){if(p[0]!==a.char[B]){if(null!==p[0]){m=!1;break}if(null!==p[1]){m=!1;break}if(null!==p[2]){m=!1;break}}}else if(null!==p[0]){m=!1;break}}}!0===m&&a.successfulMatches.push(g)}}}if(l=a.totalMatches-a.effectiveMatches,l<d&&a.successfulMatches.length>0)l=d,t=e;else if(l<=0)return!1}if(-1===t)return!1;var A=wordBank.splice(t,1);wordsActive.push(A[0]);var M=wordsActive.length-1,C=Math.random(),k=wordsActive[M].successfulMatches,T=Math.floor(C*k.length),E=k[T];for(wordsActive[M].x=E.x,wordsActive[M].y=E.y,wordsActive[M].dir=E.dir,e=0,r=wordsActive[M].char.length;e<r;e++){b=E.x,y=E.y;0===E.dir?(b+=e,board[b][y]=wordsActive[M].char[e]):(y+=e,board[b][y]=wordsActive[M].char[e]),Bounds.Update(b,y)}return!0}function BoardToHtml(e){for(var r=Bounds.top-1,t="";r<Bounds.bottom+2;r++){t+="<div class='row'>";for(var a=Bounds.left-1;a<Bounds.right+2;a++)t+=BoardCharToElement(board[a][r]);t+="</div>"}return t}function BoardCharToElement(e){var r=e?["square","letter"]:["square"];return EleStr("div",[{a:"class",v:r}],e)}function WordObj(e){this.string=e,this.char=e.split(""),this.totalMatches=0,this.effectiveMatches=0,this.successfulMatches=[]}function RegisterEvents(){document.getElementById("crossword").onfocus=function(){return!1};try{document.getElementById("btnCreate").addEventListener("click",Create,!1),document.getElementById("btnPlay").addEventListener("click",Play,!1)}catch(e){}}function EleStr(e,r,t){t=t||"";for(var a=0,o="<"+e+" ";a<r.length;a++)o+=r[a].a+"='"+ArrayToString(r[a].v," ")+"' ";return o+">"+t+"</"+e+">"}function ArrayToString(e,r){if(null===e||e.length<1)return"";null===r&&(r=",");for(var t=e[0],a=1;a<e.length;a++)t+=r+e[a];return t}function AddClass(e,r){e.className=e.className.replaceAll(" "+r,"")+" "+r}function RemoveClass(e,r){e.className=e.className.replaceAll(" "+r,"")}function ToggleClass(e,r){var t=e.className.replaceAll(" "+r,"");e.className=t.length===e.className.length?t+" "+r:t}var board,wordArr,wordBank,wordsActive,mode,Bounds={top:0,right:0,bottom:0,left:0,Update:function(e,r){this.top=Math.min(r,this.top),this.right=Math.max(e,this.right),this.bottom=Math.max(r,this.bottom),this.left=Math.min(e,this.left)},Clean:function(){this.top=999,this.right=0,this.bottom=0,this.left=999}};RegisterEvents(),String.prototype.replaceAll=function(e,r){var t=new RegExp(e,"g");return this.replace(t,r)},Create(),setInterval(()=>{Create()},5e3);